/*! 
 * cb-js-toolkit - v0.0.1
 * -------------------------------------------------------- 
 * 
 * Contributors: 
 *   Christoph Schleifer - <christoph.schleifer(a)campaigning-bureau.com>
 *   Michael Scharl      - <ms(a)campaigning-bureau.com>
 *   Stefan Schindler    - <stefan.schindler(a)campaigning-bureau.com>
 *   Rainer Angerer      - <rainer.angerer(a)campaigning-bureau.com>
 */ 
!function(a){a.cbToolkit||(a.cbToolkit={}),a.cbToolkit.trackHashView=function(b,c){var d=this,e=function(a){d.options.debug&&window.console&&console.debug(a)};d.$el=a(b),d.el=b,d.$w=a(window),d.w=window,d.offset=d.$w.height()/2,d.sentPageview=[],d.$el.data("cbToolkit.trackHashView",d),d.init=function(){d.options=a.extend({},a.cbToolkit.trackHashView.defaultOptions,c),jQuery("a[href]",d.$el).each(function(b,c){var e=jQuery(c).attr("href").split("#");e.length>=1&&a("#"+e[1]).length&&(d.options.sectionHash["#"+e[1]]=0)});for(var b in d.options.sectionHash)d.options.sectionHash[b]=a(b).offset().top!==!1?a(b).offset().top:2*a(document).height();d.$w.on("scroll",d.onScroll)},d.onScroll=function(){var a=d.$w.scrollTop(),b="#";for(var c in d.options.sectionHash){var e=d.options.sectionHash[c];b=a>=e?c:b}d.feature.setURLHash(b),d.feature.sendPageview(b)},d.feature={},d.feature.setURLHash=function(a){d.options.setURLHash&&"#"+location.hash!==a&&location.hash!==a&&window.history.pushState&&(e("Pushing Hash: "+a),window.history.pushState(null,null,a))},d.feature.sendPageview=function(b){d.options.sendPageview&&-1===a.inArray(b,d.sentPageview)&&"undefined"!=typeof ga&&(e("Send Pageview: "+b),d.sentPageview.push(b),ga("send","pageview",{page:b}))},jQuery(d.init)},a.cbToolkit.trackHashView.defaultOptions={setURLHash:!0,sendPageview:!0,sectionHash:{},debug:!1},a.fn.cbToolkit_trackHashView=function(b){return this.each(function(){new a.cbToolkit.trackHashView(this,b)})}}(jQuery);
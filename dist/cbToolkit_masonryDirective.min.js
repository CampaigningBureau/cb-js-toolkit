/*! 
 * cb-js-toolkit - v0.0.1
 * -------------------------------------------------------- 
 * 
 * Contributors: 
 *   Christoph Schleifer - <christoph.schleifer(a)campaigning-bureau.com>
 *   Michael Scharl      - <ms(a)campaigning-bureau.com>
 *   Stefan Schindler    - <stefan.schindler(a)campaigning-bureau.com>
 *   Rainer Angerer      - <rainer.angerer(a)campaigning-bureau.com>
 */ 
angular.module("cbToolkit_masonry",[]).value("masonryLoad",{index:0}).directive("masonry",[function(){var a={};return a.restrict="A",a.controller=["$scope","$element","$attrs","masonryLoad",function(a,b,c,d){var e=angular.fromJson(c.masonryOptions);a.$masonry=new Masonry(b[0],e),a.$on("masonry.reset.loadindex",function(){d.index=0})}],a}]).directive("masonryBrick",[function(){var a={};return a.restrict="A",a.controller=["$scope","$element","masonryLoad","$rootScope",function(a,b,c,d){function e(){f&&!g&&a.$index===c.index&&(b.show(),a.$masonry.appended(b[0]),g=!0,c.index+=1,h(),d.$broadcast("masonry.show.next"))}var f=!1,g=!1;b.hide(),setTimeout(function(){imagesLoaded(b,function(){a.$apply(function(){f=!0,e()})})},100);var h=a.$on("masonry.show.next",function(){e()});a.$on("$destroy",function(){a.$masonry.remove(b[0]),a.$masonry.layout()})}],a}]);